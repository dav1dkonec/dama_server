<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:dama_klient_app.ViewModels"
             xmlns:models="clr-namespace:dama_klient_app.Models"
             x:Class="dama_klient_app.Views.LobbyView"
             x:DataType="vm:LobbyViewModel">
    <DockPanel>
        <Grid ColumnDefinitions="*,Auto"
              RowDefinitions="Auto,Auto"
              DockPanel.Dock="Top"
              Margin="0 0 0 12">
            <StackPanel Orientation="Horizontal"
                        Spacing="8"
                        VerticalAlignment="Center">
                <TextBlock Text="{Binding Nickname}"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center" />
                <TextBlock Text="v lobby"
                           Foreground="Gray"
                           VerticalAlignment="Center" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Spacing="8"
                        HorizontalAlignment="Right"
                        Grid.Column="1"
                        Grid.Row="0">
                <Button Content="Obnovit"
                        Command="{Binding RefreshCommand}" />
                <Button Content="Vytvořit stůl"
                        Command="{Binding CreateRoomCommand}" />
                <Button Content="Odhlásit"
                        Command="{Binding LogoutCommand}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Spacing="6"
                        Grid.Column="1"
                        Grid.Row="1"
                        HorizontalAlignment="Right"
                        Margin="0 6 0 0">
                <Ellipse Width="8"
                         Height="8"
                         Fill="{Binding ServerStatusBrush}"
                         VerticalAlignment="Center" />
                <TextBlock Text="{Binding ServerStatusText}"
                           Foreground="Gray" />
            </StackPanel>
        </Grid>

        <StackPanel Spacing="8">
            <TextBlock Text="{Binding StatusMessage}"
                       Foreground="Gray"
                       Margin="0 0 0 4" />
            <Border BorderBrush="#DDD"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="8">
                <ListBox ItemsSource="{Binding Rooms}"
                         SelectedItem="{Binding SelectedRoom, Mode=TwoWay}"
                         SelectionMode="Single"
                         MinHeight="240">
                    <ListBox.ItemTemplate>
                        <DataTemplate x:DataType="models:RoomInfo">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" Width="140"/>
                                <StackPanel Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="{Binding PlayerCount}" />
                                    <TextBlock Text="/" />
                                    <TextBlock Text="{Binding Capacity}" />
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Border>
            <StackPanel Spacing="4">
                <Grid>
                    <Button x:Name="JoinButton"
                            Content="Připojit"
                            Command="{Binding JoinRoomCommand}"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center" />
                </Grid>
                <TextBlock Text="Vyberte stůl a připojte se."
                           Foreground="Gray"
                           FontSize="12"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center" />
            </StackPanel>
        </StackPanel>
    </DockPanel>
</UserControl>
